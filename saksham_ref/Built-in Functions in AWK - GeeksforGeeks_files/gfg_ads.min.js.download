/*  03-04-2024 10:54 IST [variant_id=33] */
function splitDivs(parentDivName, childDivNames, childDivWidths, childDivHeights) {
    var parentDiv = document.getElementById(parentDivName);
    if (!parentDiv) {
        console.error("Parent div not found: ", parentDivName);
        return;
    }
    parentDiv.innerHTML = '';
    if (childDivNames.length !== childDivWidths.length || childDivNames.length !== childDivHeights.length) {
        console.error("Child div names, widths, and heights should have the same length.");
        return;
    }
    parentDiv.style.maxHeight = '';
    parentDiv.style.display = 'flex';
    parentDiv.style.justifyContent = 'center';
    parentDiv.style.flexWrap = 'wrap';
    parentDiv.style.gap = '1.5em';
    for (var i = 0; i < childDivNames.length; i++) {
        var childDiv = document.createElement('div');
        childDiv.id = childDivNames[i];
        childDiv.style.width = childDivWidths[i] + 'px';
        childDiv.style.height = childDivHeights[i] + 'px';
        parentDiv.appendChild(childDiv);
    }
}
var _BTF_650x250_ParentDivName = 'GFG_AD_InContent_Desktop_BTF_650x250';
var _BTF_650x250_ChildDivNames = ['GFG_AD_InContent_Desktop_BTF_300x250_1', 'GFG_AD_InContent_Desktop_BTF_300x250_2'];
var _BTF_650x250_ChildDivWidths = [320, 320];
var _BTF_650x250_ChildDivHeights = [250, 250];
splitDivs(_BTF_650x250_ParentDivName, _BTF_650x250_ChildDivNames, _BTF_650x250_ChildDivWidths, _BTF_650x250_ChildDivHeights);
var _Incontent_728x280_ParentDivName = 'GFG_AD_InContent_Desktop_728x280';
var _Incontent_728x280_ChildDivNames = ['GFG_AD_InContent_Desktop_350x250_1', 'GFG_AD_InContent_Desktop_350x250_2'];
var _Incontent_728x280_ChildDivWidths = [320, 320];
var _Incontent_728x280_ChildDivHeights = [250, 250];
splitDivs(_Incontent_728x280_ParentDivName, _Incontent_728x280_ChildDivNames, _Incontent_728x280_ChildDivWidths, _Incontent_728x280_ChildDivHeights);
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
googletag.cmd.push(function() {
    googletag.pubads().disableInitialLoad();
});
const blockedLineItems = [];
const TempTagAdUnit = {
    "GFG_AD_Desktop_ATF_300x100": {
        "code": "/27823234/GFG_Desktop_ATF_300x100",
        "refresh": {
            "time": 20,
            "status": "off",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 100],
                        [300, 50]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_archive_ATF_728x250": {
        "code": "/27823234/gfg_archive_ATF_728x250",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [728, 90],
                        [728, 250],
                        [300, 250],
                        [250, 250],
                        [300, 50],
                        [300, 100],
                        [320, 180],
                        [180, 150],
                        [320, 50]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_archive_ATF_728x280": {
        "code": "/27823234/GFG_Archive_ATF_650x250",
        "screen": {
            "is": "greaterThan",
            "width": 1300
        },
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 50],
                        [728, 90],
                        [320, 50]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_archive_MTF_728x250": {
        "code": "/27823234/GFG_Archive_MTF_650x250",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [650, 250],
                        [300, 250],
                        [300, 50],
                        [300, 100],
                        [320, 180],
                        [250, 250],
                        [728, 90],
                        [180, 150],
                        [320, 50]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent": {
        "code": "/27823234/gfg_outstream_incontent",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-2": {
        "code": "/27823234/gfg_outstream_incontent_2",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-3": {
        "code": "/27823234/gfg_outstream_incontent_5",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-4": {
        "code": "/27823234/gfg_outstream_incontent_3",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-5": {
        "code": "/27823234/gfg_outstream_incontent_6",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-6": {
        "code": "/27823234/gfg_outstream_incontent_4",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_gfg_outstream_incontent-7": {
        "code": "/27823234/gfg_outstream_incontent_7",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 300,
                "w": 400,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [400, 300],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_Desktop_MTF_Postcontent_728x90": {
        "code": "/27823234/GFG_Desktop_MTF_Postcontent_728x90",
        "screen": {
            "is": "greaterThan",
            "width": 1500
        },
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [728, 90],
                        [300, 50],
                        [320, 50],
                        [728, 90]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_InContent_Desktop_BTF_300x250_1": {
        "code": "/27823234/GFG_InContent_Desktop_BTF_300x250_1",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [320, 250],
                        [300, 50],
                        [320, 50],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_InContent_Desktop_BTF_300x250_2": {
        "code": "/27823234/GFG_InContent_Desktop_BTF_300x250_2",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [320, 250],
                        [300, 50],
                        [320, 50],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_Desktop_RightSideBar_ATF_300x600": {
        "code": "/27823234/22683361272",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250],
                        [300, 50],
                        [300, 100],
                        [250, 250],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_Desktop_RightSideBar_ATF_300x250_2": {
        "code": "/27823234/GFG_Desktop_RightSideBar_ATF_300x250_2",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [250, 250],
                        [300, 50],
                        [300, 100],
                        [300, 250],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_Desktop_RightSideBar_BTFdocked_300x600": {
        "code": "/27823234/22683361281",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250],
                        [300, 50],
                        [300, 100],
                        [250, 250],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_Desktop_RightSideBar_BTF_Sticky_300x250": {
        "code": "/27823234/GFG_Desktop_RightSideBar_BTF_Sticky_300x250",
        "refresh": {
            "time": 20,
            "status": "on",
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "h": 250,
                "w": 300,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "plcmt": 4,
                "context": "outstream",
                "linearity": 2,
                "placement": 2,
                "protocols": [2, 3, 5, 6, 7, 8],
                "sizeConfig": [{
                    "playerSize": [300, 250],
                    "minViewPort": [0, 0]
                }],
                "maxduration": 30,
                "minduration": 5,
                "playbackmethod": [2]
            },
            "banner": {
                "sizeConfig": [{
                    "sizes": [
                        [300, 250],
                        [320, 180],
                        [300, 50],
                        [300, 100],
                        [180, 150]
                    ],
                    "minViewPort": [0, 0]
                }]
            }
        },
        "headerBidding": "on"
    },
    "GFG_AD_InContent_Desktop_350x250_1": {
        "code": "/27823234/GFG_InContent_Desktop_350x250_1",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 20,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [300, 50],
                        [180, 150],
                        [320, 250],
                        [320, 50]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 300,
                "h": 250,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [300, 250]
                }]
            }
        }
    },
    "GFG_AD_InContent_Desktop_350x250_2": {
        "code": "/27823234/GFG_InContent_Desktop_350x250_2",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 20,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [300, 50],
                        [180, 150],
                        [320, 250],
                        [320, 50]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 300,
                "h": 250,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [300, 250]
                }]
            }
        }
    }
};
let TagAdUnit = {};
Object.keys(TempTagAdUnit).forEach(function(key) {
    if (TempTagAdUnit[key].hasOwnProperty('screen')) {
        if (TempTagAdUnit[key]['screen']['is'] == 'greaterThan' && window.innerWidth > TempTagAdUnit[key]['screen']['width']) {
            TagAdUnit[key] = TempTagAdUnit[key];
        }
        if (TempTagAdUnit[key]['screen']['is'] == 'smallerThan' && window.innerWidth < TempTagAdUnit[key]['screen']['width']) {
            TagAdUnit[key] = TempTagAdUnit[key];
        }
    } else {
        TagAdUnit[key] = TempTagAdUnit[key];
    }
});
const bidders = [{
    "bidder": "appnexus",
    "params": {
        "placementId": 24617164,
        "allowSmallerSizes": 1
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}];
let TagAdUnitCopy = JSON.parse(JSON.stringify(TagAdUnit));
var FAILSAFE_TIMEOUT = 2000;
var PREBID_TIMEOUT = 1500;
var refreshableAd = [];
var activeViewAd = [];
var adSlots = [];
var isTabActive;
window.onfocus = function() {
    isTabActive = true;
};
window.onblur = function() {
    isTabActive = Object.values(TempTagAdUnit).some(curr => curr.refresh.backgroundRefresh);
};
googletag.cmd.push(function() {
    googletag.pubads().addEventListener('slotOnload', function(event) {
        var slot = event.slot;
        var tag = slot.getSlotElementId();
        if (TagAdUnit[tag] && TagAdUnit[tag].refresh.status === "on") {
            var refreshtime = parseInt(TagAdUnit[tag].refresh.time);
            setTimeout(() => {
                readyToRefresh(event.slot.getSlotElementId());
            }, refreshtime * 1000);
        }
    });
});
googletag.cmd.push(function() {
    googletag.pubads().addEventListener('slotVisibilityChanged', function(event) {
        var slot = event.slot;
        var index = activeViewAd.indexOf(slot);
        var el = slot.getSlotElementId();
        if (TagAdUnit[el] && (TagAdUnit[el].refresh.status != "on" || TagAdUnit[el].refresh.notInView || TagAdUnit[el].refresh.backgroundRefresh)) {
            return
        }
        if (event.inViewPercentage < 50 && index > -1) {
            activeViewAd.splice(index, 1);
            return
        }
        if (event.inViewPercentage >= 50 && index <= -1) {
            activeViewAd.push(slot);
            return
        }
    });
});
const gfg_ugen = getCookie('gfg_ugen');
const gfg_utype = getCookie('gfg_utype');
const gfg_uqual = getCookie('gfg_uqual');
const gfg_ugy = getCookie('gfg_ugy');
const gfg_ucc = getCookie('gfg_ucc');
const gfg_ads_exp = getCookie('gfg_ads_exp');
isTabActive = true;
var elms = document.querySelectorAll('div[id^=GFG_AD_]');
var interval1 = setInterval(() => {
    if (googletag.apiReady) {
        clearInterval(interval1);
        createAdSlots(elms);
        setPageLevelTargetings();
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
        googletag.cmd.push(function() {
            googletag.display(adSlots[0]);
            googletag.pubads().refresh(adSlots);
        });
    }
}, 500);

function canRefreshAdsOnCurrSlot(tagProperties) {
    return tagProperties.refresh.status === "on" && (tagProperties.refresh.notInView || tagProperties.refresh.backgroundRefresh);
}

function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = document.cookie.length;
            }
            return decodeURI(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
}

function adRefresh(slot) {
    var code = slot.getAdUnitPath();
    var tag = slot.getSlotElementId();
    var sizes = TagAdUnit[tag]["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"];
    googletag.cmd.push(function() {
        googletag.pubads().refresh([slot]);
        googletag.display(tag);
    });
}

function readyToRefresh(el) {
    var index = refreshableAd.indexOf(el);
    if (index <= -1) {
        refreshableAd.push(el);
    }
}

function refreshActiveViewAd() {
    for (let i = 0; i < activeViewAd.length; i++) {
        var slot = activeViewAd[i];
        var el = JSON.parse(JSON.stringify(slot.getSlotElementId()));
        var index = refreshableAd.indexOf(el);
        if (index > -1) {
            refreshableAd.splice(index, 1);
            if (slot.getSlotElementId() == el) {
                adRefresh(slot);
            }
        }
    }
}
const interval = setInterval(function() {
    if (window.isTabActive == true) {
        refreshActiveViewAd();
    }
}, 1000);

function createAdSlots(elms) {
    try {
        for (let i = 0; i < elms.length; i++) {
            let element = elms[i];
            if (!TagAdUnit[element.id]) continue;
            googletag.cmd.push(function() {
                var adSlot = googletag.defineSlot(TagAdUnit[element.id].code, TagAdUnit[element.id]["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"], element.id).addService(googletag.pubads());
                adSlots.push(adSlot);
                if (canRefreshAdsOnCurrSlot(TagAdUnit[element.id])) {
                    activeViewAd.push(adSlot);
                }
            });
        }
    } catch (err) {
        console.log("invalid tag id", err);
    }
}

function setPageLevelTargetings() {
    googletag.cmd.push(function() {
        googletag.pubads().setTargeting("gfg_categories", window.arrPostCatName);
        googletag.pubads().setTargeting("gfg_url", window.location.pathname);
        googletag.pubads().setTargeting("gender", (gfg_ugen == "" ? 'not_set' : gfg_ugen));
        googletag.pubads().setTargeting("user_type", (gfg_utype == "" ? 'not_set' : gfg_utype));
        googletag.pubads().setTargeting("qualification", (gfg_uqual == "" ? 'not_set' : gfg_uqual));
        googletag.pubads().setTargeting("grad_year", (gfg_ugy == "" ? 'not_set' : gfg_ugy));
        googletag.pubads().setTargeting("current_salary", (gfg_ucc == "" ? 'not_set' : gfg_ucc));
        googletag.pubads().setTargeting("experimentKey", (gfg_ads_exp == "" ? 'not_set' : gfg_ads_exp));
    });
}

function areArrayIntersecting(a, b) {
    for (let i = 0; i < a.length; i++) {
        for (let j = 0; j < b.length; j++) {
            if (a[i][0] == b[j][0] && a[i][1] == b[j][1]) return true;
        }
    }
    return false;
}